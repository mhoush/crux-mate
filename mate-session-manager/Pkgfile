# Description: MATE session manager and configuration program
# URL: http://www.mate-desktop.org/
# Maintainer: Matt Housh, jaeger at crux dot ninja
# Depends on: dbus-glib gtk3 consolekit gtk desktop-file-utils

name=mate-session-manager
version=1.22.0
release=1
source=(http://pub.mate-desktop.org/releases/${version:0:4}/$name-$version.tar.xz \
  start-mate msm-no-systemd.patch)

build() {
  cd $name-$version
  patch -p1 -i $SRC/msm-no-systemd.patch
  ./configure --prefix=/usr \
    --disable-nls \
    --without-systemd
  make
  make DESTDIR=$PKG install

  rm -r $PKG/usr/share/locale

  install -o root -g root -m 0755 $SRC/start-mate \
    $PKG/usr/bin/start-mate

  sed -i -e 's,Exec=mate-session,Exec=start-mate,g' \
    $PKG/usr/share/xsessions/mate.desktop
}
